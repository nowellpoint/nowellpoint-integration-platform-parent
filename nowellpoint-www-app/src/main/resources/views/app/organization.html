<!DOCTYPE HTML>
<html lang="en">

<head>
    <title>${messages["application.title"]}</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!-- Material Design Bootstrap -->
    <link href="/css/mdb.min.css" rel="stylesheet">

</head>

<body>

    <script>
        var billingContact = {
            firstName: "${(organization.subscription.billingContact.firstName)!}",
            lastName: "${(organization.subscription.billingContact.lastName)!}",
            email: "${(organization.subscription.billingContact.email)!}",
            phone: "${(organization.subscription.billingContact.phone)!}"
        }

        var billingAddress = {
            street: "${(organization.subscription.billingAddress.street)!}",
            city: "${(organization.subscription.billingAddress.city)!}",
            state: "${(organization.subscription.billingAddress.state)!}",
            postalCode: "${(organization.subscription.billingAddress.postalCode)!}",
            countryCode: "${(organization.subscription.billingAddress.countryCode)!}"
        }

        var organization = {
            basePath: "${links['organization']}",
            id: "${organization.id}",
            cardholdername: "${(organization.subscription.creditCard.cardholderName)!}",
            lastFour: "${(organization.subscription.creditCard.lastFour)!}",
            cardType: "${(organization.subscription.creditCard.cardType)!}",
            expirationMonth: "${(organization.subscription.creditCard.expirationMonth)!}",
            expirationYear: "${(organization.subscription.creditCard.expirationYear)!}",
            billingContact: billingContact,
            billingAddress: billingAddress
        }

        sessionStorage.setItem("organization", JSON.stringify(organization));
    </script>

    <!--Double navigation-->
    <header>
        <!-- Navbar -->
        <nav class="navbar fixed-top navbar-toggleable-md navbar-expand-lg scrolling-navbar double-nav sticky-top">

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="${messages['toggle.navigation']}">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="navbar-brand">${messages["application.title"]}</div>
            <div class="collapse navbar-collapse" id="navbarContent">
                <ul class="nav navbar-nav nav-flex-icons mr-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="${links['start']}">
                            <i class="fa fa-star"></i><span class="clearfix d-none d-sm-inline-block">&nbsp;${messages["start"]}</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="${links['dashboard']}">${messages["dashboard"]}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="${links['connectors']}">${messages["connectors"]}</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="${links['jobs']}">${messages["jobs"]}</a>
                    </li>
                </ul>
                <#include "navbar-menu.html" />
            </div>
        </nav>
        <!-- /.Navbar -->
    </header>
    <!--/.Double navigation-->

    <!--Main Layout-->
    <main>
        <div id="success-alert" class="alert alert-success" style="display: none">
            <button type="button" class="close" data-dismiss="alert">x</button>
            <strong>${messages["success"]}</strong> ${messages["record.saved"]}
        </div>

        <div class="container mt-5">
            <div class="card border-light mb-3">
                <div class="card-header">
                    <div class="row">
                        <div class="col-6 align-self-center">
                            <h4>${labels["organization.information"]}</h4>
                        </div>
                        <div class="col-6 text-right">
                            <button class="btn btn-primary" data-toggle="modal" data-target="#modal-user-information" id="editUserInformation">${messages["edit"]}</button>
                        </div>
                    </div>
                </div>
                <div id="user-information" class="card-body">
                    <#include "organization-information.html" />
                </div>
            </div>
        </div>
        
        <div class="container mt-5">
            <div class="card border-light mb-3">
                <div class="card-header">
                    <div class="row">
                        <div class="col-6 align-self-center">
                            <h4>${labels["subscription"]}</h4>
                        </div>
                        <div class="col-6 text-right">
                            <button class="btn btn-primary" data-toggle="modal" data-target="#modal-user-information" id="editUserInformation">${labels["change.plan"]}</button>
                        </div>
                    </div>
                </div>
                <div id="user-information" class="card-body">
                    <#include "organization-subscription.html" />
                </div>
            </div>
        </div>
    </main>

    <br>
    <br>

    <!-- JQuery -->
    <script type="text/javascript" src="/js/jquery-3.2.1.min.js"></script>
    <!-- Bootstrap tooltips -->
    <script type="text/javascript" src="/js/popper.min.js"></script>
    <!-- Bootstrap core JavaScript -->
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <!-- MDB core JavaScript -->
    <script type="text/javascript" src="/js/mdb.min.js"></script>
    <!-- Custom JavaScript -->
    <script type="text/javascript" src="/js/organization.js"></script>

</body>

</html>